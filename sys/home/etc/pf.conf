# Workstation pf.conf

ext_if="re0"

tcp_pass = "{ 123 631 }" 
udp_pass = "{ 110 631 }"

icmp_types = "{echoreq, unreach}"
icmp6_types= "{echoreq, unreach, 133, 134, 135, 136, 137}"

service = "{ 22 2375 3306 }" 	# ssh docker mysql
web = "{ 53 443 80 }" 		# dns/http(s)
dev = "{ 34 }" 			# misc misc 

# Drop 
set block-policy drop
# Dont Filter local
set skip on lo0 

# reassemble
scrub in on $ext_if all fragment reassemble

# Default deny
block in log all

# Allow outgoing connections
pass out quick modulate state

# antispoof
antispoof for $ext_if inet

# Allow services in 
# pass in on $ext_if inet proto tcp from any to any port $tcp_services $tcp_state
# pass in on $ext_if inet6 proto tcp from any to any port $tcp_services $tcp_state
# pass in on $ext_if inet proto udp from any to any port $udp_services $udp_state
# pass in on $ext_if inet6 proto udp from any to any port $udp_services $udp_state


# Allow ICMP
pass inet proto icmp all icmp-type $icmp_types keep state
pass inet6 proto icmp6 all icmp6-type $icmp6_types keep state

